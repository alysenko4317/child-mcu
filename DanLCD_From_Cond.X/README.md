# –ü—Ä–æ—î–∫—Ç: LCD-–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä —ñ–∑ –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∞ –±–∞–∑—ñ HT1621

–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î —Ä–æ–±–æ—Ç—É –∑ LCD-–¥–∏—Å–ø–ª–µ—î–º –Ω–∞ –±–∞–∑—ñ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞ **HT1621** —Ç–∞ –æ–±—Ä–æ–±–∫—É **6 –∫–Ω–æ–ø–æ–∫**, –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Å–µ–≥–º–µ–Ω—Ç—ñ–≤ —ñ –≤–∏–≤–æ–¥—É —á–∏—Å–ª–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó. –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –Ω–∞ –º—ñ–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ AVR –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **—á–∏—Å—Ç–æ–≥–æ C** —ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏.

---

## üß† –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

- –í–∏–≤–µ–¥–µ–Ω–Ω—è –¥–≤–æ–∑–Ω–∞—á–Ω–æ–≥–æ —á–∏—Å–ª–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è (–ª—ñ—á–∏–ª—å–Ω–∏–∫) –Ω–∞ LCD-–¥–∏—Å–ø–ª–µ–π
- –†–æ–±–æ—Ç–∞ –∑ 6 –∫–Ω–æ–ø–∫–∞–º–∏, –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–º–∏ —á–µ—Ä–µ–∑ –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å—É–≤–∞–Ω–Ω—è SPI-–ª—ñ–Ω—ñ–π
- –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –æ–∫—Ä–µ–º–∏—Ö —Å–µ–≥–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –ø–æ–≤–Ω–µ –≤–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è –≤—Å—ñ—Ö —Å–µ–≥–º–µ–Ω—Ç—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–∞–π–º–µ—Ä–∞ 1 —Å–µ–∫. —á–µ—Ä–µ–∑ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è
- –ß–∏—Å—Ç–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –ø–æ —Ä—ñ–≤–Ω—è—Ö: HAL / Middleware / Application

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```txt
src/
‚îú‚îÄ‚îÄ main.c                 ‚Üê –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –∑ main(), —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏
‚îÇ
‚îú‚îÄ‚îÄ drivers/               ‚Üê –ù–∏–∑—å–∫–æ—Ä—ñ–≤–Ω–µ–≤—ñ –¥—Ä–∞–π–≤–µ—Ä–∏ (HAL)
‚îÇ   ‚îú‚îÄ‚îÄ board.h            ‚Üê –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ–Ω—ñ–≤ –ø–ª–∞—Ç–∏ (–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
‚îÇ   ‚îú‚îÄ‚îÄ buttons.c/h        ‚Üê –†–æ–±–æ—Ç–∞ –∑ –∫–Ω–æ–ø–∫–∞–º–∏: —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è, –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ ht1621.c/h         ‚Üê –î—Ä–∞–π–≤–µ—Ä HT1621: –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ —Ç–∞ –¥–∞–Ω–∏—Ö
‚îÇ
‚îú‚îÄ‚îÄ middleware/            ‚Üê –õ–æ–≥—ñ–∫–∞ –æ–±—Ä–æ–±–∫–∏ —Ç–∞ —Å–µ—Ä–≤—ñ—Å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ lcd_display.c/h    ‚Üê –í–∏–≤—ñ–¥ —á–∏—Å–µ–ª —ñ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ –¥–∏—Å–ø–ª–µ—è
‚îÇ   ‚îú‚îÄ‚îÄ button_service.c/h ‚Üê –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π –Ω–∞—Ç–∏—Å–∫–∞–Ω—å, debounce, callback
```

---

## ‚öôÔ∏è –ü–æ–±—É–¥–æ–≤–∞ –ø—Ä–æ—î–∫—Ç—É

–ü—Ä–æ—î–∫—Ç —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–∏–π –Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **MPLAB X**.  

---

## üîò –ö–Ω–æ–ø–∫–∏

| –ö–Ω–æ–ø–∫–∞ | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                           |
|--------|----------------------------------------|
| 0      | –ü–µ—Ä–µ–º–∏–∫–∞—î —Å–µ–≥–º–µ–Ω—Ç–∏ COM1               |
| 1      | –ü–µ—Ä–µ–º–∏–∫–∞—î —Å–µ–≥–º–µ–Ω—Ç–∏ COM2               |
| 2      | –ü–µ—Ä–µ–º–∏–∫–∞—î —Å–µ–≥–º–µ–Ω—Ç–∏ COM3               |
| 3      | –ü–µ—Ä–µ–º–∏–∫–∞—î —Å–µ–≥–º–µ–Ω—Ç–∏ COM4               |
| 4      | –í–≤—ñ–º–∫–Ω—É—Ç–∏ –≤—Å—ñ —Å–µ–≥–º–µ–Ω—Ç–∏ COM1‚ÄìCOM4      |
| 5      | –í–∏–º–∫–Ω—É—Ç–∏ –≤—Å—ñ —Å–µ–≥–º–µ–Ω—Ç–∏ COM1‚ÄìCOM4       |

---

## üõ†Ô∏è –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

- **AVR Libc**
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ `F_CPU = 16 MHz`
- –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä `avr-gcc`
- [–æ–ø—Ü—ñ–π–Ω–æ] `make` –∞–±–æ MPLAB X IDE –¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è

---

## üîå –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—à–∏–≤–∫–∏ –≤ –º—ñ–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä

–û—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–æ—Ä **AVR ISP 3.2** —î –Ω–µ—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–º (–∫–ª–æ–Ω), —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ **MPLAB X IDE** –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –π–æ–≥–æ –Ω–∞–ø—Ä—è–º—É.  
–î–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–µ **AVR Studio 4** —É —Ä–µ–∂–∏–º—ñ **STK500 + COM-–ø–æ—Ä—Ç**.

---

### üß≠ –ö—Ä–æ–∫–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ AVR Studio
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –º–µ–Ω—é **Tools ‚Üí Program AVR ‚Üí Connect...**  
   ![Program AVR](images/avrisp_menu_connect.png)
3. –£ –≤—ñ–∫–Ω—ñ, —â–æ –∑‚Äô—è–≤–∏–ª–æ—Å—å:
   - –í–∏–±—Ä–∞—Ç–∏ **Platform**: `STK500`
   - –í–∏–±—Ä–∞—Ç–∏ **Port**: COM-–ø–æ—Ä—Ç, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `COM3`)
   - –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **Connect**
   
   ![Select STK500 COM](images/avrisp_stk500_com3.png)

4. –ü—ñ—Å–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Program**
5. –£ —Å–µ–∫—Ü—ñ—ó Flash:
   - –û–±—Ä–∞—Ç–∏ `.hex` —Ñ–∞–π–ª –ø—Ä–æ—à–∏–≤–∫–∏
   - –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **Write Flash** –¥–ª—è –∑–∞–ø–∏—Å—É

   ![Select HEX file and program](images/avrisp_flash_program_tab.png)

---

### üõ†Ô∏è –ü–æ—Ä–∞–¥–∏:

- COM-–ø–æ—Ä—Ç –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ **–î–∏—Å–ø–µ—Ç—á–µ—Ä—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ Windows** (`Ports (COM & LPT)`)
- –ü—Ä–æ–≥—Ä–∞–º–∞—Ç–æ—Ä –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ –º—ñ–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞:  
  **MISO, MOSI, SCK, RESET, VCC, GND**

## üì∏ –§–æ—Ç–æ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–æ–≤–∞–Ω–æ—ó –ø–ª–∞—Ç–∏

–í–∏–≥–ª—è–¥ –ø–ª–∞—Ç–∏, —è–∫—É –º–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–ª–∏ –ø—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏ –∑ —Ü–∏–º –ø—Ä–æ—î–∫—Ç–æ–º:

**–õ–∏—Ü—å–æ–≤–∞ —Å—Ç–æ—Ä–æ–Ω–∞ (–∑—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–º LCD-–¥–∏—Å–ø–ª–µ—î–º):**  
![–ü–ª–∞—Ç–∞ –ª–∏—Ü—å–æ–≤–∞](images/pcb_face_small.jpg)

**–ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ (–∑ –ø—Ä–æ–≤–æ–¥–∞–º–∏ —Ç–∞ –º—ñ–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–æ–º):**  
![–ü–ª–∞—Ç–∞ –∑–≤–æ—Ä–æ—Ç–Ω–∞](images/pcb_back_small.jpg)

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

–ü—Ä–æ—î–∫—Ç –Ω–∞–¥–∞–Ω–∏–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –æ—Å–≤—ñ—Ç–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.
